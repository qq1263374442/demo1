(this.webpackJsonpprize_admin=this.webpackJsonpprize_admin||[]).push([[0],{254:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),r=n(25),c=n.n(r),d=(n(162),n(117)),l=n.n(d),o=n(141),s=n(86),u=n(63),b=n(37),p=n(154),j=n(258),f=n(259),O=n(257),h=n(261),m=n(32),x=n(256),z=n(80),_=n.n(z),v=n(85),y=n.n(v),k=n(155),I=n(21),g=function(e){var t=e.editing,n=e.dataIndex,i=e.title,a=e.inputType,r=(e.record,e.index,e.children),c=Object(p.a)(e,["editing","dataIndex","title","inputType","record","index","children"]),d="number"===a?Object(I.jsx)(j.a,{}):Object(I.jsx)(f.a,{});return Object(I.jsxs)("td",Object(b.a)(Object(b.a)({},c),{},{children:[" ",t?Object(I.jsx)(O.a.Item,{name:n,style:{margin:0},rules:[{required:!0,message:"Please Input ".concat(i,"!")}],children:d}):r]}))},C=function(){var e=O.a.useForm(),t=Object(u.a)(e,1)[0],n=Object(i.useState)(),r=Object(u.a)(n,2),c=r[0],d=r[1],p=Object(i.useState)(""),j=Object(u.a)(p,2),f=j[0],z=j[1];a.a.useEffect((function(){return y.a.post("https://qc1hz1.fn.thelarkcloud.com/prizeinfo").then((function(e){var t=e.data.response;t=t.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{key:e.prize_id})})),d(t)})),function(){}}),[]),a.a.useEffect((function(){var e=_.a.subscribe("AddPrize",(function(e,t){var n=Object(k.a)(),i=[].concat(Object(s.a)(c),[Object(b.a)(Object(b.a)({prize_id:n},t),{},{key:n})]);d(i),y.a.post("https://qc1hz1.fn.thelarkcloud.com/addPrize",Object(b.a)({prize_id:n},t))}));return function(){_.a.unsubscribe(e)}}),[c]);var v=function(e){return e.prize_id===f},C=function(){z("")},w=function(){var e=Object(o.a)(l.a.mark((function e(n){var i,a,r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.validateFields();case 3:i=e.sent,a=Object(s.a)(c),r=a.findIndex((function(e){return n===e.prize_id})),o=a[r],a.splice(r,1,Object(b.a)(Object(b.a)({},o),i)),d(a),z(""),y.a.post("https://qc1hz1.fn.thelarkcloud.com/changePrize",a[r]),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log("Validate Failed:",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),P=[{title:"prize_name",dataIndex:"prize_name",width:"20%",editable:!0},{title:"prize_probability",dataIndex:"prize_probability",width:"20%",editable:!0},{title:"prize_amount",dataIndex:"prize_amount",width:"20%",editable:!0},{title:"isprize",dataIndex:"isprize",width:"5%",editable:!1,render:function(e,t){return Object(I.jsx)(h.a,{checked:t.isprize,onChange:function(e){!function(e){var t=Object(s.a)(c),n=t.findIndex((function(t){return e.prize_id===t.prize_id}));t[n].isprize=!t[n].isprize,d(t),z(""),w(e.prize_id)}(t)}})}},{title:"operation",dataIndex:"operation",render:function(e,n){return v(n)?Object(I.jsxs)("span",{children:[Object(I.jsx)(m.a,{type:"link",onClick:function(){w(n.prize_id)},style:{marginRight:8},children:"\u4fdd\u5b58"}),Object(I.jsx)(m.a,{type:"link",onClick:C,children:"\u53d6\u6d88"})]}):Object(I.jsxs)("div",{children:[Object(I.jsx)(m.a,{disabled:""!==f,type:"primary",onClick:function(){return function(e){t.setFieldsValue(Object(b.a)({prize_name:"",prize_probability:"",prize_amount:"",isprize:!0},e)),z(e.prize_id)}(n)},children:"\u4fee\u6539"}),Object(I.jsx)(m.a,{type:"danger",onClick:function(){return function(e){var t=Object(s.a)(c),n=t.findIndex((function(t){return e.prize_id===t.prize_id}));t.splice(n,1),d(t),y.a.post("https://qc1hz1.fn.thelarkcloud.com/deletePrize",{id:e.prize_id})}(n)},style:{marginLeft:8},children:"\u5220\u9664"})]})}}].map((function(e){return e.editable?Object(b.a)(Object(b.a)({},e),{},{onCell:function(t){return{record:t,inputType:"age"===e.dataIndex?"number":"text",dataIndex:e.dataIndex,title:e.title,editing:v(t)}}}):e}));return Object(I.jsx)(O.a,{form:t,component:!1,children:Object(I.jsx)(x.a,{components:{body:{cell:g}},bordered:!0,dataSource:c,columns:P,rowClassName:"editable-row",pagination:!1})})},w=n(260),P=function(e){var t=e.visible,n=e.onCreate,i=e.onCancel,a=O.a.useForm(),r=Object(u.a)(a,1)[0];return Object(I.jsx)(w.a,{visible:t,title:"\u6dfb\u52a0\u4e00\u4e2a\u5956\u54c1",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onCancel:i,onOk:function(){r.validateFields().then((function(e){r.resetFields(),n(e)})).catch((function(e){console.log("Validate Failed:",e)}))},children:Object(I.jsxs)(O.a,{form:r,layout:"vertical",name:"form_in_modal",initialValues:{modifier:"public"},children:[Object(I.jsx)(O.a.Item,{name:"prize_name",label:"Prize_name",rules:[{required:!0,message:"Please input the title of collection!"}],children:Object(I.jsx)(f.a,{})}),Object(I.jsx)(O.a.Item,{name:"prize_probability",label:"Prize_probability",children:Object(I.jsx)(f.a,{type:"textarea"})}),Object(I.jsx)(O.a.Item,{name:"prize_amount",label:"Prize_amount",children:Object(I.jsx)(f.a,{type:"textarea"})}),Object(I.jsx)(O.a.Item,{name:"isprize",label:"isprize",valuePropName:"checked",initialValue:!0,children:Object(I.jsx)(h.a,{defaultChecked:!0})})]})})},F=function(){var e=Object(i.useState)(!1),t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(I.jsxs)("div",{children:[Object(I.jsx)(m.a,{type:"primary",onClick:function(){a(!0)},children:"\u6dfb\u52a0"}),Object(I.jsx)(P,{visible:n,onCreate:function(e){_.a.publish("AddPrize",e),a(!1)},onCancel:function(){a(!1)}})]})};var q=function(){return Object(I.jsxs)("div",{style:{textAlign:"center",width:"70%",margin:"0 auto"},children:[Object(I.jsx)(C,{}),Object(I.jsx)(F,{})]})};c.a.render(Object(I.jsx)(q,{}),document.getElementById("root"))}},[[254,1,2]]]);
//# sourceMappingURL=main.c254fec8.chunk.js.map